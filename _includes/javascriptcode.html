<script>
        $(document).ready(function() {
            $('.fancybox').fancybox();
        });
    </script>

    <script>
        $("a[href$='.jpg'],a[href$='.jpeg'],a[href$='.png'],a[href$='.gif']").attr('rel', 'gallery').attr('class', 'postimage').fancybox();
    </script>

<script>
  jQuery(document).ready(function($) {
    $("img").each(function() {
        if($(this).attr("alt") == '')
        $(this).attr("alt") = {{ }}
        else $(this).parent().attr("title", $(this).attr("src"));
    });
  });
  </script>

<!-- add a link to the image itself and wrap in figure and add caption from alt -->
<script>
$(document).ready(function() {
  $('.post-content img').each(function ()
  {
    var imageCaption = $(this).attr("alt");
     var currentImage = $(this);
     currentImage.wrap("<figure><a class='popup' href='" + currentImage.attr("src") + "'/><span class='caption'>" + imageCaption +
            "</span></figure>");
    
  });
});
</script>

<!-- now follows the javascript to show that a post can be edited -->

{% if page.layout == catalogue %}
<script>
  
  if (localStorage.getItem("netlify-cms-user") != '') {
  var theuser = JSON.parse(localStorage.getItem("netlify-cms-user")).name;
  $("#user").html("<a class='editlink' title='With permission through GitHub' href='/admin/#/collections/catalogue/entries{{ page.path | remove: '.md' | remove: '_catalogue' }}'>" + "edit this page" + "</a>");
}

</script>
{% endif %}
